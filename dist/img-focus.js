(()=>{var t={283:(t,e,s)=>{"use strict";s.d(e,{Z:()=>n});var o=s(645),i=s.n(o)()((function(t){return t[1]}));i.push([t.id,"#focus{height:100%;display:flex;flex-wrap:wrap;align-content:start;row-gap:var(--img-focus-gap,0);column-gap:var(--img-focus-gap,0)}#focus::slotted(*){flex-grow:1;text-align:center}@media (max-width:50em){#focus::slotted(*){width:100%}}#focus.noflex::slotted(*){flex-grow:unset;transition:flex-grow .5s ease .5s}#zoom{display:none}#zoom-figure{display:grid;grid-template-rows:2em auto 2em}#zoom-image{grid-row-start:2;width:100%;height:100%;object-fit:contain}#zoom-figcaption{grid-row-start:3;align-self:center;text-align:center;font-family:sans-serif;color:var(--img-focus-caption-color,#fff)}",""]);const n=i},14:(t,e,s)=>{"use strict";s.d(e,{Z:()=>n});var o=s(645),i=s.n(o)()((function(t){return t[1]}));i.push([t.id,"img{cursor:pointer;vertical-align:middle}img.transition{transition:height .5s ease-in-out}@media (min-width:50em){img{height:var(--img-focus-lines-height,200px)}}@media (max-width:50em){img{width:100%}}#overlay{position:absolute}",""]);const n=i},55:(t,e,s)=>{"use strict";s.d(e,{Z:()=>n});var o=s(645),i=s.n(o)()((function(t){return t[1]}));i.push([t.id,"div#zoom{position:fixed;top:0;right:0;bottom:0;left:0;background-color:rgba(0,0,0,.8);display:flex;align-items:center;justify-content:center;user-select:none;z-index:10000}#close,#next,#prev{position:absolute;color:var(--img-focus-icons-color,#fff);padding:1.5rem;text-decoration:none}#close{font-size:2.5rem;top:0;right:0}#prev{left:0}#next,#prev{font-size:5rem}#next{right:0}#next.disabled,#prev.disabled{opacity:.3;cursor:default}::slotted(*){height:100vh;width:90vw}",""]);const n=i},645:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var s=t(e);return e[2]?"@media ".concat(e[2]," {").concat(s,"}"):s})).join("")},e.i=function(t,s,o){"string"==typeof t&&(t=[[null,t,""]]);var i={};if(o)for(var n=0;n<this.length;n++){var r=this[n][0];null!=r&&(i[r]=!0)}for(var h=0;h<t.length;h++){var l=[].concat(t[h]);o&&i[l[0]]||(s&&(l[2]?l[2]="".concat(s," and ").concat(l[2]):l[2]=s),e.push(l))}},e}},562:t=>{t.exports='<slot id="focus"></slot> <img-zoom id="zoom"><figure id="zoom-figure"> <img id="zoom-image" src="#" alt=""/> <figcaption id="zoom-figcaption"></figcaption></figure></img-zoom> '},650:t=>{t.exports='<div id="overlay"> <slot id="slot"></slot> </div> '},12:t=>{t.exports='<div id="zoom"> <slot id="slot"></slot> <a id="close" href="#">✕</a> <a id="prev" href="#">〈</a> <a id="next" href="#">〉</a> </div> '}},e={};function s(o){if(e[o])return e[o].exports;var i=e[o]={id:o,exports:{}};return t[o](i,i.exports,s),i.exports}s.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return s.d(e,{a:e}),e},s.d=(t,e)=>{for(var o in e)s.o(e,o)&&!s.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";class t{constructor(t){this.focus=t,this.timeout=null}layout(){this.timeoutId||this.resetStyles(),clearTimeout(this.timeoutId),this.timeoutId=setTimeout((()=>{this.timeoutId=null,this.layoutInternal()}),200)}layoutInternal(){const t=this.computeNewLineHeight(),e=this.focus.getFocusElementBounding().width;this.updateHeight(t),e-this.focus.getFocusElementBounding().width>0||this.updateDom(t)}resetStyles(){this.focus.getFocusElement().classList.remove("noflex"),this.focus.getStore().photos.forEach((t=>{t.imgPhoto.clearHeight()}))}computeNewLineHeight(){const t=[],e=[],s=[],o=[],i=[];let n=0,r=-1;return this.focus.getStore().photos.forEach(((i,n)=>{(r>=i.getImgBounding().left||0===n)&&(t.push(i.getImgBounding().height),s.push(0),o.push(0),e.push([])),e[e.length-1].push(i),s[s.length-1]+=i.getImgBounding().width,o[o.length-1]+=this.getCorrectedWidth(i),r=i.getImgBounding().left})),t.forEach(((t,e)=>{i.push(t*o[e]/s[e])})),e.length>1&&(n=e[1][0].getImgBounding().top-e[0][0].getImgBounding().bottom),{gap:n,lineHeight:t[0],linesPhotos:e,newLineHeight:i}}updateHeight({newLineHeight:t,lineHeight:e,gap:s}){const o=t.slice(0,-1).reduce(((t,e)=>t+e+s),e);this.focus.getFocusElement().style.height=`${o}px`}updateDom({linesPhotos:t,newLineHeight:e}){this.focus.getFocusElement().classList.add("noflex"),t.forEach(((t,s,o)=>{s!==o.length-1&&t.forEach((t=>{t.imgPhoto.setHeight(e[s]-.01+"px")}))}))}getCorrectedWidth(t){let e=t.getBounding().right;return e>this.focus.getFocusElementBounding().right&&(e=this.focus.getFocusElementBounding().right),e-t.getBounding().left}}class e{constructor(t){this.imgPhotoInner=t}get imgPhoto(){return this.imgPhotoInner}getImgBounding(){return this.imgPhotoInner.getImg().getBoundingClientRect()}getBounding(){return this.imgPhotoInner.getBoundingClientRect()}}class o{constructor(){this.imgPhotoMap=new Map,this.photosInner=[],this.current=null}add(t){this.photosInner.push(t),this.imgPhotoMap.set(t.imgPhoto,t)}insert(t,e){this.photosInner.splice(this.photosInner.indexOf(e)+1,0,t),this.imgPhotoMap.set(t.imgPhoto,t)}select(t){this.current=t}getCurrent(){return this.current}prev(){const t=this.getPrev(this.current);return null!==t&&(this.current=t),t}hasPrev(t){return null!==this.getPrev(t)}getPrev(t){const e=this.photosInner.indexOf(t);return 0===e?null:this.photosInner[e-1]}next(){const t=this.getNext(this.current);return null!==t&&(this.current=t),t}hasNext(t){return null!==this.getNext(t)}getNext(t){const e=this.photosInner.indexOf(t);return e===this.photosInner.length-1?null:this.photosInner[e+1]}get(t){return this.imgPhotoMap.get(t)}get photos(){return this.photosInner}}class i{static copyAttribute(t,e,s){t&&e&&(t.hasAttribute(s)?e.setAttribute(s,t.getAttribute(s)):e.removeAttribute(s))}static setAttribute(t,e,s){s?t.setAttribute(e,s):t.removeAttribute(e)}static setBooleanAttribute(t,e,s){s?t.setAttribute(e,""):t.removeAttribute(e)}}var n=s(283),r=s(562),h=s.n(r);class l extends HTMLElement{constructor(){super(),this.el=this.attachShadow({mode:"open"}),this.store=new o}connectedCallback(){const t=document.createElement("style"),e=document.createElement("template");t.textContent=n.Z,e.innerHTML=h(),this.el.appendChild(t),this.el.appendChild(e),this.el.appendChild(e.content.cloneNode(!0)),this.tabIndex=0,this.setup()}setup(){this.focusElement=this.el.querySelector("#focus"),this.zoomElement=this.el.querySelector("#zoom"),this.layout=new t(this),this.addPhotos(),this.addPhotoEventListener(),this.addResizeHandler()}addPhotos(){const t=this.shadowRoot.querySelector("#focus");t.addEventListener("slotchange",(()=>{const e=t.assignedElements();let s=null;e.forEach((t=>{"IMG-PHOTO"!==t.tagName||this.store.get(t)||this.addPhoto(t,s),s=t}))}))}addPhoto(t,s){const o=new e(t);t.shadowRoot.addEventListener("img-photo-select",(()=>this.openPhoto(o))),t.shadowRoot.addEventListener("img-photo-load",(()=>this.layout.layout())),this.insertPhoto(o,s)}insertPhoto(t,e){if(null===e)this.store.add(t);else{const s=this.store.get(e);this.store.insert(t,s)}}addResizeHandler(){let t=-1;new ResizeObserver((()=>{const e=this.focusElement.getBoundingClientRect().width;e!==t&&(this.layout.layout(),t=e)})).observe(this.focusElement)}addPhotoEventListener(){this.zoomElement.shadowRoot.addEventListener("img-zoom-close",(()=>this.closePhoto())),this.zoomElement.shadowRoot.addEventListener("img-zoom-prev",(()=>this.prevPhoto())),this.zoomElement.shadowRoot.addEventListener("img-zoom-next",(()=>this.nextPhoto()))}openPhoto(t){this.el.dispatchEvent(new Event("img-focus-photo-open",{bubbles:!0,composed:!0})),this.store.select(t),this.displayPhoto(t),this.zoomElement.style.display="block",this.zoomElement.focus({preventScroll:!0})}prevPhoto(){const t=this.store.prev();t&&this.displayPhoto(t)}nextPhoto(){const t=this.store.next();t&&this.displayPhoto(t)}displayPhoto(t){const e=this.zoomElement.querySelector("#zoom-figcaption"),s=this.zoomElement.querySelector("#zoom-image");i.setBooleanAttribute(this.zoomElement,"hasprevious",this.store.hasPrev(t)),i.setBooleanAttribute(this.zoomElement,"hasnext",this.store.hasNext(t)),i.copyAttribute(t.imgPhoto,s,"alt"),i.copyAttribute(t.imgPhoto,s,"srcset"),i.setAttribute(s,"size","100vw"),e.textContent=t.imgPhoto.alt}closePhoto(){this.el.dispatchEvent(new Event("img-focus-photo-close",{bubbles:!0,composed:!0}));const t=this.zoomElement.querySelector("#zoom-figcaption"),e=this.zoomElement.querySelector("#zoom-image");this.zoomElement.style.display="none",e.alt="",e.srcset="",e.size="",t.textContent="",this.store.getCurrent().imgPhoto.focus()}getStore(){return this.store}getFocusElement(){return this.focusElement}getFocusElementBounding(){return this.focusElement.getBoundingClientRect()}}var a=s(14),c=s(650),u=s.n(c);class d extends HTMLElement{constructor(){super(),this.el=this.attachShadow({mode:"open"})}static get observedAttributes(){return["srcset","alt"]}connectedCallback(){const t=document.createElement("style"),e=document.createElement("template");t.textContent=a.Z,e.innerHTML=u(),this.el.appendChild(t),this.el.appendChild(e),this.el.appendChild(e.content.cloneNode(!0)),this.tabIndex=0,this.setup()}setup(){this.addEventListener("keydown",(t=>{"Enter"===t.key&&(this.el.dispatchEvent(new Event("img-photo-select")),t.preventDefault())})),this.img=document.createElement("img"),this.img.addEventListener("load",(()=>this.el.dispatchEvent(new Event("img-photo-load")))),this.img.addEventListener("click",(()=>this.el.dispatchEvent(new Event("img-photo-select")))),this.initSources(),this.el.appendChild(this.img)}attributeChangedCallback(){this.initSources()}initSources(){this.img&&(i.copyAttribute(this,this.img,"srcset"),i.copyAttribute(this,this.img,"alt"),this.hasAttribute("srcset")?this.img.setAttribute("sizes","(min-width: 320px) 640px"):this.img.removeAttribute("sizes"))}clearHeight(){this.img.style.height="",this.img.classList.remove("transition")}setHeight(t){this.img.style.height=t,this.img.classList.add("transition")}getImg(){return this.img}get srcset(){return this.getAttribute("srcset")}set srcset(t){this.setAttribute("srcset",t)}get alt(){return this.getAttribute("alt")}set alt(t){this.setAttribute("alt",t)}}var g=s(55),m=s(12),p=s.n(m);class f extends HTMLElement{constructor(){super(),this.el=this.attachShadow({mode:"open"})}static get observedAttributes(){return["hasprevious","hasnext"]}attributeChangedCallback(){this.updateState()}connectedCallback(){const t=document.createElement("style"),e=document.createElement("template");t.textContent=g.Z,e.innerHTML=p(),this.el.appendChild(t),this.el.appendChild(e),this.el.appendChild(e.content.cloneNode(!0)),this.tabIndex=0,this.setup()}setup(){this.prevElement=this.el.querySelector("#prev"),this.nextElement=this.el.querySelector("#next"),this.updateState();const t="close",e="next",s="prev";this.el.querySelector("#zoom").addEventListener("click",(o=>{[t,s,e].includes(o.target.id)||this.sendEvent(t)})),this.addEventListener("keydown",(o=>{switch(o.key){case"ArrowUp":case"ArrowLeft":this.sendEvent(s);break;case"ArrowDown":case"ArrowRight":this.sendEvent(e);break;case"Escape":this.sendEvent(t);break;default:return}o.preventDefault()}));for(const o of[t,s,e])this.shadowRoot.querySelector(`#${o}`).addEventListener("click",(t=>{this.sendEvent(o),t.preventDefault()}))}updateState(){this.prevElement&&f.disable(this.prevElement,!this.hasAttribute("hasprevious")),this.nextElement&&f.disable(this.nextElement,!this.hasAttribute("hasnext"))}static disable(t,e){e?t.classList.add("disabled"):t.classList.remove("disabled")}sendEvent(t){this.el.dispatchEvent(new Event(`img-zoom-${t}`))}get hasprevious(){return this.getAttribute("hasprevious")}set hasprevious(t){this.setAttribute("hasprevious",t)}get hasnext(){return this.getAttribute("hasnext")}set hasnext(t){this.setAttribute("hasnext",t)}}window.customElements.define("img-zoom",f),window.customElements.define("img-photo",d),window.customElements.define("img-focus",l)})()})();