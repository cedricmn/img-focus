(()=>{var t={910:(t,e,o)=>{(t.exports=o(252)(!1)).push([t.id,"#focus{height:100%;display:flex;flex-wrap:wrap;align-content:start;row-gap:var(--img-focus-gap,0);column-gap:var(--img-focus-gap,0)}#focus::slotted(*){flex-grow:1}#focus.noflex::slotted(*){flex-grow:unset}#zoom{display:none}",""])},82:(t,e,o)=>{(t.exports=o(252)(!1)).push([t.id,"img{cursor:pointer;vertical-align:middle}@media (min-width:50em){img{height:200px}}#overlay{position:absolute}",""])},421:(t,e,o)=>{(t.exports=o(252)(!1)).push([t.id,"div#zoom{position:fixed;top:0;right:0;bottom:0;left:0;background-color:rgba(0,0,0,.8);display:flex;align-items:center;justify-content:center;user-select:none;z-index:10000}span#close{position:absolute;top:1vw;right:1vw;cursor:pointer;color:var(--img-focus-icons-color,#fff);font-size:2em}span#prev{left:2vw}span#next,span#prev{position:absolute;cursor:pointer;color:var(--img-focus-icons-color,#fff);font-size:5em}span#next{right:2vw}::slotted(img){max-height:90vh;max-width:90vw}",""])},252:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var o=function(t,e){var o=t[1]||"",s=t[3];if(!s)return o;if(e&&"function"==typeof btoa){var n=(h=s,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(h))))+" */"),i=s.sources.map((function(t){return"/*# sourceURL="+s.sourceRoot+t+" */"}));return[o].concat(i).concat([n]).join("\n")}var h;return[o].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+o+"}":o})).join("")},e.i=function(t,o){"string"==typeof t&&(t=[[null,t,""]]);for(var s={},n=0;n<this.length;n++){var i=this[n][0];"number"==typeof i&&(s[i]=!0)}for(n=0;n<t.length;n++){var h=t[n];"number"==typeof h[0]&&s[h[0]]||(o&&!h[2]?h[2]=o:o&&(h[2]="("+h[2]+") and ("+o+")"),e.push(h))}},e}},562:t=>{t.exports='<slot id="focus"></slot> <img-zoom id="zoom"></img-zoom> '},650:t=>{t.exports='<div id="overlay"> <slot id="slot"></slot> </div> '},12:t=>{t.exports='<div id="zoom"> <slot id="slot"></slot> <span id="close">✕</span> <span id="prev">〈</span> <span id="next">〉</span> </div> '}},e={};function o(s){if(e[s])return e[s].exports;var n=e[s]={id:s,exports:{}};return t[s](n,n.exports,o),n.exports}o.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},o.d=(t,e)=>{for(var s in e)o.o(e,s)&&!o.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";class t{constructor(t){this.focus=t}layout(){this.resetStyles();const t=this.focus.getFocusElementBounding().width;this.onePassLayout(),t-this.focus.getFocusElementBounding().width>0&&(this.focus.getFocusElement().style.width=this.focus.getFocusElementBounding().width+"px",this.resetStyles(),this.onePassLayout(),this.focus.getFocusElement().style.width="")}resetStyles(){this.focus.getFocusElement().classList.remove("noflex"),this.focus.getStore().photos.forEach(t=>{t.imgPhoto.setHeight("")})}onePassLayout(){const t=this.computeNewLineHeight();this.updateDom(t.linesPhotos,t.newLineHeight)}computeNewLineHeight(){const t=[],e=[],o=[],s=[],n=[];let i=-1;return this.focus.getStore().photos.forEach((n,h)=>{(i>=n.getImgBounding().left||0===h)&&(t.push(n.getImgBounding().height),o.push(0),s.push(0),e.push([])),e[e.length-1].push(n),o[o.length-1]+=n.getImgBounding().width,s[s.length-1]+=this.getCorrectedWidth(n),i=n.getImgBounding().left}),t.forEach((t,e)=>{n.push(t*s[e]/o[e])}),{linesPhotos:e,newLineHeight:n}}updateDom(t,e){this.focus.getFocusElement().classList.add("noflex"),t.forEach((t,o,s)=>{o!==s.length-1&&t.forEach(t=>{t.imgPhoto.setHeight(e[o]-.01+"px")})})}getCorrectedWidth(t){let{right:e}=t.getBounding();return e>this.focus.getFocusElementBounding().width&&(e=this.focus.getFocusElementBounding().width),e-t.getBounding().left}}class e{constructor(t){this.imgPhotoInner=t}get imgPhoto(){return this.imgPhotoInner}getImgBounding(){return this.imgPhotoInner.getImg().getBoundingClientRect()}getBounding(){return this.imgPhotoInner.getBoundingClientRect()}}class s{constructor(){this.imgPhotoMap=new Map,this.photosInner=[],this.current=null}add(t){this.photosInner.push(t),this.imgPhotoMap.set(t.imgPhoto,t)}insert(t,e){this.photosInner.splice(this.photosInner.indexOf(e)+1,0,t),this.imgPhotoMap.set(t.imgPhoto,t)}select(t){this.current=t}prev(){const t=this.photosInner.indexOf(this.current);return 0===t?null:(this.current=this.photosInner[t-1],this.current)}next(){const t=this.photosInner.indexOf(this.current);return t===this.photosInner.length-1?null:(this.current=this.photosInner[t+1],this.current)}get(t){return this.imgPhotoMap.get(t)}get photos(){return this.photosInner}}var n=o(910),i=o.n(n),h=o(562),r=o.n(h);class l extends HTMLElement{constructor(){super(),this.el=this.attachShadow({mode:"open"}),this.store=new s}connectedCallback(){const t=document.createElement("style"),e=document.createElement("template");t.textContent=i(),e.innerHTML=r(),this.el.appendChild(t),this.el.appendChild(e),this.el.appendChild(e.content.cloneNode(!0)),this.setup()}setup(){this.focusElement=this.el.querySelector("#focus"),this.zoomElement=this.el.querySelector("#zoom"),this.layout=new t(this),this.addPhotos(),this.addPhotoEventListener(),this.addResizeHandler()}addPhotos(){const t=this.shadowRoot.querySelector("#focus");t.addEventListener("slotchange",()=>{const e=t.assignedElements();let o=null;e.forEach(t=>{"IMG-PHOTO"!==t.tagName||this.store.get(t)||this.addPhoto(t,o),o=t})})}addPhoto(t,o){const s=new e(t);t.shadowRoot.addEventListener("img-photo-click",()=>this.selectPhoto(s)),t.shadowRoot.addEventListener("img-photo-load",()=>this.layout.layout()),this.insertPhoto(s,o)}insertPhoto(t,e){if(null===e)this.store.add(t);else{const o=this.store.get(e);this.store.insert(t,o)}}addResizeHandler(){let t=-1;new ResizeObserver(()=>{const e=this.focusElement.getBoundingClientRect().width;e!==t&&(this.layout.layout(),t=e)}).observe(this.focusElement)}addPhotoEventListener(){this.zoomElement.shadowRoot.addEventListener("img-zoom-close",()=>this.hidePhoto()),this.zoomElement.shadowRoot.addEventListener("img-zoom-prev",()=>this.prevPhoto()),this.zoomElement.shadowRoot.addEventListener("img-zoom-next",()=>this.nextPhoto())}selectPhoto(t){this.store.select(t),this.displayPhoto(t)}prevPhoto(){const t=this.store.prev();t&&this.displayPhoto(t)}nextPhoto(){const t=this.store.next();t&&this.displayPhoto(t)}displayPhoto(t){let e=this.zoomElement.querySelector("#currentphoto");e||(e=document.createElement("img"),e.id="currentphoto",this.zoomElement.appendChild(e)),e.srcset=t.imgPhoto.srcset,e.size="100vw",this.zoomElement.style.display="block"}hidePhoto(){this.zoomElement.style.display="none",this.zoomElement.removeChild(this.zoomElement.querySelector("#currentphoto"))}getStore(){return this.store}getFocusElement(){return this.focusElement}getFocusElementBounding(){return this.focusElement.getBoundingClientRect()}}var c=o(82),d=o.n(c),a=o(421),u=o.n(a),m=o(650),p=o.n(m);class g extends HTMLElement{constructor(){super(),this.el=this.attachShadow({mode:"open"})}connectedCallback(){const t=document.createElement("style"),e=document.createElement("template");t.textContent=d(),e.innerHTML=p(),this.el.appendChild(t),this.el.appendChild(e),this.el.appendChild(e.content.cloneNode(!0)),this.addPhoto()}addPhoto(){this.img=document.createElement("img"),this.img.srcset=this.getAttribute("srcset"),this.img.sizes="(min-width: 320px) 640px",this.img.addEventListener("load",()=>this.el.dispatchEvent(new Event("img-photo-load"))),this.img.addEventListener("click",()=>this.el.dispatchEvent(new Event("img-photo-click"))),this.el.appendChild(this.img)}setHeight(t){this.img.style.height=t}get srcset(){return this.getAttribute("srcset")}set srcset(t){this.setAttribute("srcset",t)}getImg(){return this.img}}var f=o(12),v=o.n(f);class E extends HTMLElement{constructor(){super(),this.el=this.attachShadow({mode:"open"})}connectedCallback(){const t=document.createElement("style"),e=document.createElement("template");t.textContent=u(),e.innerHTML=v(),this.el.appendChild(t),this.el.appendChild(e),this.el.appendChild(e.content.cloneNode(!0)),this.addHandlers()}addHandlers(){const t=["close","prev","next"];for(const e of t)this.shadowRoot.querySelector("#"+e).addEventListener("click",()=>{const t=new Event("img-zoom-"+e);this.el.dispatchEvent(t)})}}window.customElements.define("img-focus",l),window.customElements.define("img-photo",g),window.customElements.define("img-zoom",E)})()})();