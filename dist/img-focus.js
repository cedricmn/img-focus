(()=>{var t={283:(t,e,s)=>{"use strict";s.d(e,{Z:()=>n});var i=s(645),o=s.n(i)()((function(t){return t[1]}));o.push([t.id,"#focus{height:100%;display:flex;flex-wrap:wrap;align-content:start;row-gap:var(--img-focus-gap,0);column-gap:var(--img-focus-gap,0)}#focus::slotted(*){flex-grow:1;text-align:center}@media (max-width:50em){#focus::slotted(*){width:100%}}#focus.noflex::slotted(*){flex-grow:unset}#zoom{display:none}#zoom-figure{display:grid;margin:0;grid-template-rows:2em calc(100% - 4em) 2em}#zoom-image{grid-row-start:2;width:100%;height:100%;object-fit:contain}#zoom-figcaption{grid-row-start:3;align-self:center;text-align:center;font-family:sans-serif;color:var(--img-focus-caption-color,#fff)}",""]);const n=o},14:(t,e,s)=>{"use strict";s.d(e,{Z:()=>n});var i=s(645),o=s.n(i)()((function(t){return t[1]}));o.push([t.id,"img{cursor:pointer;vertical-align:middle;width:auto;height:auto;opacity:0}img.layout{opacity:1}@media (min-width:50em){img{height:var(--img-focus-lines-height,200px)}}@media (max-width:50em){img{width:100%}}#overlay{position:absolute}",""]);const n=o},55:(t,e,s)=>{"use strict";s.d(e,{Z:()=>n});var i=s(645),o=s.n(i)()((function(t){return t[1]}));o.push([t.id,"div#zoom{position:fixed;top:0;right:0;bottom:0;left:0;background-color:rgba(0,0,0,.8);display:flex;align-items:center;justify-content:center;user-select:none;z-index:10000}button{position:absolute;color:var(--img-focus-icons-color,#fff);padding:1.5rem;cursor:pointer;border:0;background-color:transparent}button:disabled{opacity:.3;cursor:default}#close{font-size:2.5rem;top:0;right:0}#prev{left:0}#next,#prev{font-size:5rem}#next{right:0}::slotted(*){height:100%;width:100%}",""]);const n=o},645:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var s=t(e);return e[2]?"@media ".concat(e[2]," {").concat(s,"}"):s})).join("")},e.i=function(t,s,i){"string"==typeof t&&(t=[[null,t,""]]);var o={};if(i)for(var n=0;n<this.length;n++){var h=this[n][0];null!=h&&(o[h]=!0)}for(var r=0;r<t.length;r++){var l=[].concat(t[r]);i&&o[l[0]]||(s&&(l[2]?l[2]="".concat(s," and ").concat(l[2]):l[2]=s),e.push(l))}},e}},562:t=>{t.exports='<slot id="focus"></slot> <img-zoom id="zoom"><figure id="zoom-figure"> <img id="zoom-image" src="#" alt="" role="none"/> <figcaption id="zoom-figcaption"></figcaption></figure></img-zoom> '},650:t=>{t.exports='<div id="overlay"> <slot id="slot"></slot> </div> '},12:t=>{t.exports='<div id="zoom" role="none"> <slot id="slot"></slot> <button id="close" aria-label="Close photo">✕</button> <button id="next" aria-label="Next photo">〉</button> <button id="prev" aria-label="Previous photo">〈</button> </div> '}},e={};function s(i){if(e[i])return e[i].exports;var o=e[i]={id:i,exports:{}};return t[i](o,o.exports,s),o.exports}s.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return s.d(e,{a:e}),e},s.d=(t,e)=>{for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";class t{static copyAttribute(t,e,s){t&&e&&(t.hasAttribute(s)?e.setAttribute(s,t.getAttribute(s)):e.removeAttribute(s))}static setAttribute(t,e,s){s?t.setAttribute(e,s):t.removeAttribute(e)}static setBooleanAttribute(t,e,s){s?t.setAttribute(e,""):t.removeAttribute(e)}}var e=s(14),i=s(650),o=s.n(i);class n extends HTMLElement{constructor(){super(),this.el=this.attachShadow({mode:"open"})}static get observedAttributes(){return["srcset","sizes","width","height","alt"]}attributeChangedCallback(){this.updateAttributes()}connectedCallback(){const s=document.createElement("style"),i=document.createElement("template");s.textContent=e.Z,i.innerHTML=o(),this.el.appendChild(s),this.el.appendChild(i),this.el.appendChild(i.content.cloneNode(!0)),this.tabIndex=0,t.setAttribute(this,"role","button"),t.setAttribute(this,"aria-label",this.alt),this.setup()}setup(){this.addEventListener("keydown",(t=>{"Enter"!==t.key&&" "!==t.key||(this.dispatchEvent(new Event("img-photo-select")),t.preventDefault())})),this.addEventListener("click",(()=>this.dispatchEvent(new Event("img-photo-select")))),this.img=document.createElement("img"),t.setAttribute(this.img,"role","none"),this.img.addEventListener("load",(()=>this.dispatchEvent(new Event("img-photo-load")))),this.updateAttributes(),this.el.appendChild(this.img)}updateAttributes(){this.img&&(t.copyAttribute(this,this.img,"srcset"),t.copyAttribute(this,this.img,"alt"),this.hasAttribute("sizes")?t.copyAttribute(this,this.img,"sizes"):t.setAttribute(this.img,"sizes","(min-width: 50em) 15vw, 100vw"),t.copyAttribute(this,this.img,"width"),t.copyAttribute(this,this.img,"height"))}clearSize(){this.img.style.width="",this.img.style.height=""}setWidth(t){this.img.style.width=t}setHeight(t){this.img.style.height=t,this.img.classList.add("layout")}getImg(){return this.img}get srcset(){return this.getAttribute("srcset")}set srcset(t){this.setAttribute("srcset",t)}get sizes(){return this.getAttribute("sizes")}set sizes(t){this.setAttribute("sizes",t)}get width(){return this.getAttribute("width")}set width(t){this.setAttribute("width",t)}get height(){return this.getAttribute("height")}set height(t){this.setAttribute("height",t)}get alt(){return this.getAttribute("alt")}set alt(t){this.setAttribute("alt",t)}}class h{constructor(t){this.photoElementInner=t}get photoElement(){return this.photoElementInner}getImgBounding(){return this.photoElementInner.getImg().getBoundingClientRect()}getBounding(){return this.photoElementInner.getBoundingClientRect()}getImageWidth(){return this.photoElement.width&&this.photoElement.height?this.photoElement.width*this.getImgBounding().height/this.photoElement.height:this.getImgBounding().width}}class r{constructor(t){this.focusElement=t,this.timeout=null}layout(t=!1){this.timeoutId||this.resetStyles();let e=200;t&&(e=0),clearTimeout(this.timeoutId),this.timeoutId=setTimeout((()=>{this.timeoutId=null,this.layoutInternal()}),e)}layoutInternal(){const t=this.computeNewLineHeight(),e=this.focusElement.getFocusSlotBounding().width;this.updateHeight(t),e-this.focusElement.getFocusSlotBounding().width>0||this.updateDom(t)}resetStyles(){this.focusElement.getFocusSlot().classList.remove("noflex"),this.focusElement.getStore().photos.forEach((t=>{t.photoElement.clearSize()}))}computeNewLineHeight(){const t=[],e=[],s=[],i=[],o=[];let n=0,h=-1;return this.focusElement.getStore().photos.forEach(((o,n)=>{(h>=o.getImgBounding().left||0===n)&&(t.push(o.getImgBounding().height),s.push(0),i.push(0),e.push([])),e[e.length-1].push(o),s[s.length-1]+=o.getImageWidth(),i[i.length-1]+=this.getCorrectedWidth(o),h=o.getImgBounding().left})),t.forEach(((t,e)=>{o.push(t*i[e]/s[e])})),r.updateLastLineHeight(o,t[0]),e.length>1&&(n=e[1][0].getImgBounding().top-e[0][0].getImgBounding().bottom),{gap:n,linesPhotos:e,newLineHeight:o}}static updateLastLineHeight(t,e){const s=t.pop();let i=e;if(t.length>=1){const e=t.reduce(((t,e)=>t+e),0)/t.length;i=Math.min(e,s)}t.push(i)}updateHeight({newLineHeight:t,gap:e}){const s=this.focusElement.getFocusSlotBounding().height,i=t.reduce(((t,s)=>t+s+e),-e);(!s||i>s||s-i>50)&&(this.focusElement.getFocusSlot().style.height=`${i}px`)}updateDom({linesPhotos:t,newLineHeight:e}){this.focusElement.getFocusSlot().classList.add("noflex"),t.forEach(((t,s)=>{const i=e[s]-.01;t.forEach((t=>{if(t.photoElement.width&&t.photoElement.height){const e=t.photoElement.width*i/t.photoElement.height;t.photoElement.setWidth(e-.01+"px")}t.photoElement.setHeight(`${i}px`)}))}))}getCorrectedWidth(t){let e=t.getBounding().right;return e>this.focusElement.getFocusSlotBounding().right&&(e=this.focusElement.getFocusSlotBounding().right),e-t.getBounding().left}}class l{constructor(){this.photoMap=new Map,this.photosInner=[],this.current=null}add(t){this.photosInner.push(t),this.photoMap.set(t.photoElement,t)}insert(t,e){this.photosInner.splice(this.photosInner.indexOf(e)+1,0,t),this.photoMap.set(t.photoElement,t)}select(t){this.current=t}getCurrent(){return this.current}prev(){const t=this.getPrev(this.current);return null!==t&&(this.current=t),t}hasPrev(t){return null!==this.getPrev(t)}getPrev(t){const e=this.photosInner.indexOf(t);return 0===e?null:this.photosInner[e-1]}next(){const t=this.getNext(this.current);return null!==t&&(this.current=t),t}hasNext(t){return null!==this.getNext(t)}getNext(t){const e=this.photosInner.indexOf(t);return e===this.photosInner.length-1?null:this.photosInner[e+1]}get(t){return this.photoMap.get(t)}get photos(){return this.photosInner}}var a=s(283),u=s(562),c=s.n(u);class d extends HTMLElement{constructor(){super(),this.el=this.attachShadow({mode:"open"}),this.store=new l}connectedCallback(){const t=document.createElement("style"),e=document.createElement("template");t.textContent=a.Z,e.innerHTML=c(),this.el.appendChild(t),this.el.appendChild(e),this.el.appendChild(e.content.cloneNode(!0)),this.setup()}setup(){this.focusSlot=this.el.querySelector("#focus"),this.zoomElement=this.el.querySelector("#zoom"),this.layout=new r(this),this.addPhotos(),this.addZoomEventListeners(),this.addResizeObserver()}addPhotos(){this.focusSlot.addEventListener("slotchange",(()=>{const t=this.focusSlot.assignedElements();let e=null;t.forEach((t=>{"IMG-PHOTO"!==t.tagName||this.store.get(t)||this.addPhoto(t,e),e=t}))}))}addPhoto(t,e){const s=new h(t);this.insertPhoto(s,e),t.addEventListener("img-photo-select",(()=>this.openPhoto(s))),t.hasAttribute("width")&&t.hasAttribute("height")?this.layout.layout(!0):t.addEventListener("img-photo-load",(()=>this.layout.layout()))}insertPhoto(t,e){if(null===e)this.store.add(t);else{const s=this.store.get(e);this.store.insert(t,s)}}addResizeObserver(){let t=-1;new ResizeObserver((()=>{const e=this.getFocusSlotBounding().width;e!==t&&t>-1&&this.layout.layout(),t=e})).observe(this.focusSlot)}addZoomEventListeners(){this.zoomElement.addEventListener("img-zoom-close",(()=>this.closePhoto())),this.zoomElement.addEventListener("img-zoom-prev",(()=>this.prevPhoto())),this.zoomElement.addEventListener("img-zoom-next",(()=>this.nextPhoto()))}openPhoto(t){this.el.dispatchEvent(new Event("img-focus-photo-open",{bubbles:!0,composed:!0})),this.store.select(t),this.displayPhoto(t),this.zoomElement.style.display="block",this.zoomElement.focus({preventScroll:!0})}prevPhoto(){const t=this.store.prev();t&&this.displayPhoto(t)}nextPhoto(){const t=this.store.next();t&&this.displayPhoto(t)}displayPhoto(e){const s=this.zoomElement.querySelector("#zoom-figcaption"),i=this.zoomElement.querySelector("#zoom-image");t.setBooleanAttribute(this.zoomElement,"hasprevious",this.store.hasPrev(e)),t.setBooleanAttribute(this.zoomElement,"hasnext",this.store.hasNext(e)),t.copyAttribute(e.photoElement,i,"alt"),t.copyAttribute(e.photoElement,i,"srcset"),t.setAttribute(i,"sizes","100vw"),s.textContent=e.photoElement.alt}closePhoto(){this.el.dispatchEvent(new Event("img-focus-photo-close",{bubbles:!0,composed:!0}));const t=this.zoomElement.querySelector("#zoom-figcaption"),e=this.zoomElement.querySelector("#zoom-image");this.zoomElement.style.display="none",e.alt="",e.srcset="",e.sizes="",t.textContent="",this.store.getCurrent().photoElement.focus()}getStore(){return this.store}getFocusSlot(){return this.focusSlot}getFocusSlotBounding(){return this.focusSlot.getBoundingClientRect()}}var g=s(55),m=s(12),p=s.n(m);const f="close",E="next",v="prev";class b extends HTMLElement{constructor(){super(),this.el=this.attachShadow({mode:"open"})}static get observedAttributes(){return["hasprevious","hasnext"]}attributeChangedCallback(){this.updateActions()}connectedCallback(){const e=document.createElement("style"),s=document.createElement("template");e.textContent=g.Z,s.innerHTML=p(),this.el.appendChild(e),this.el.appendChild(s),this.el.appendChild(s.content.cloneNode(!0)),this.tabIndex=-1,t.setAttribute(this,"role","dialog"),t.setAttribute(this,"aria-label","Display photo"),this.setup()}setup(){this.prevElement=this.el.querySelector(`#${v}`),this.nextElement=this.el.querySelector(`#${E}`),this.closeElement=this.el.querySelector(`#${f}`),this.actions=[this.closeElement,this.nextElement,this.prevElement],this.updateActions(),this.addKeydownEventListener(),this.addEventListener("focus",(()=>{this.el.activeElement||this.closeElement.focus()})),this.el.querySelector("#zoom").addEventListener("click",(t=>{[f,v,E].includes(t.target.id)||this.sendEvent(f)}));for(const t of[f,v,E])this.shadowRoot.querySelector(`#${t}`).addEventListener("click",(e=>{this.sendEvent(t),e.preventDefault()}))}addKeydownEventListener(){this.addEventListener("keydown",(t=>{switch(t.key){case"ArrowUp":case"ArrowLeft":this.sendEvent(v);break;case"ArrowDown":case"ArrowRight":this.sendEvent(E);break;case"Escape":this.sendEvent(f);break;case"Tab":{let e=this.actions.filter((t=>!t.disabled));e.length>1&&(t.shiftKey&&(e=e.reverse()),e[(e.indexOf(this.el.activeElement)+1)%e.length].focus());break}default:return}t.preventDefault()}))}updateActions(){this.prevElement&&t.setBooleanAttribute(this.prevElement,"disabled",!this.hasAttribute("hasprevious")),this.nextElement&&t.setBooleanAttribute(this.nextElement,"disabled",!this.hasAttribute("hasnext"))}sendEvent(t){this.dispatchEvent(new Event(`img-zoom-${t}`))}get hasprevious(){return this.getAttribute("hasprevious")}set hasprevious(t){this.setAttribute("hasprevious",t)}get hasnext(){return this.getAttribute("hasnext")}set hasnext(t){this.setAttribute("hasnext",t)}}window.customElements.define("img-zoom",b),window.customElements.define("img-photo",n),window.customElements.define("img-focus",d)})()})();